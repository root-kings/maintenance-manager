extends components/layout.pug

block styles

block navtitle
    a.teal-text.brand-logo(href="/") SPARES

block content
    #sparemodal.modal.modal-fixed-footer
        .modal-content
            
            .row
                h4.col.s12 Create case
                form#createspareform.col.s12(action='/spare/create', method='POST')
                    .row
                        .input-field.col.s12
                            input#case.validate(type="text", name="case")
                            label(for="case") Case
                    
                        .input-field.col.s12
                            input#incharge.validate(type="text", name="incharge")
                            label(for="incharge") Incharge
                        
                        .input-field.col.s12
                            input#email.validate(type="email", name="email")
                            label(for="email") Email

                        .input-field.col.s12
                            input#phone.validate(type="tel", name="phone")
                            label(for="phone") Phone  
                    
                    
                        //- .input-field.col.s6
                        //-     input.datepicker#requisition(type="text", name="requisition")
                        //-     label(for="requisition") Requisition date (yyyy-mm-dd)  
                    
                        //- .input-field.col.s6
                        //-     input#requisitiontimeout(type="number", name="requisitiontimeout")
                        //-     label(for="requisitiontimeout") timeout (days)
                    //- .row
                    //-     .col.s2
                    //-         h6.span.grey-text Status
                    //- .row
                    //-     .col.s4        
                    //-         a.waves-effect.waves-light.btn-small Button
                    //-     .col.s8    
                    //-         a.waves-effect.waves-light.btn-small Button
                    //- .row    
                    //-     .col.s4    
                    //-         a.waves-effect.waves-light.btn-small Button
                    //-     .col.s8    
                    //-         a.waves-effect.waves-light.btn-small Button       

                

        .modal-footer
            a.modal-close.waves-effect.waves-red.btn-flat.red-text(href="#!") Cancel
            a.btn.modal-close.waves-effect.waves-light.green.white-text(href="javascript:$('#createspareform').submit();") Submit
    



    .fixed-action-btn
        // Modal Trigger
        a.waves-effect.waves-light.btn-floating.btn-large.red.modal-trigger(href="#sparemodal")
            i.material-icons.large add
    
        
                      
    


    #spares(v-once)
        

        //- .collection 
            a.collection-item(v-for="spare in spares" @click="viewSpare(spare._id)") {{spare.case}}
                i.material-icons.right chevron_right


        ul.collapsible
            li(v-for="spare in spares")
                .collapsible-header
                    p.full-width.no-margin {{spare.case}} 
                        span.right {{spare.currentstage}}
                .collapsible-body.card.no-padding.z-depth-0
                    .card-content
                        .row
                            p.col.s12.light # {{spare._id}}
                            span.col.s12.card-title.grey-text.text-darken-4 {{spare.case}}
                                //- i.material-icons.right.red-text(@click='spareDelete(spare._id)') delete

                            p.col.s12.light {{spare.currentstage}}

                        .row
                            h6.col.s12.light Incharge
                            p.col.s12 {{spare.incharge.name}}
                                br
                                | {{spare.incharge.email}}
                                br
                                | {{spare.incharge.phone}}

                        //- .row
                            p.col.s4.strong Next 
                                br
                                | {{spare.checkup.next}}
                            p.col.s4 Last
                                br
                                | {{spare.checkup.last}}
                            p.col.s4 Frequency
                                br
                                | {{spare.checkup.interval.value}} {{spare.checkup.interval.unit}}
                            //- p.col.s6 {{spare.location.shop}} - {{spare.location.sector}}
                        
                        
                                
                    
                    
                    
                    
                    
                    //- .card-action
                        //- .input-field
                            input(type="text", name="remark", v-bind:id="'remark'+spare._id")
                            label(v-bind:for="'remark'+spare._id") Remark 
                        
                        .input-field
                            input.datepicker(type="text", name="date", v-bind:id="'date'+spare._id")
                            label(v-bind:for="'date'+spare._id") Add record date (yyyy-mm-dd)
                        
                        a.btn.btn-flat.btn-bordered.curvy(@click="addRecord(spare._id)") Add
                            i.material-icons.left add

                        //- a.btn.btn-flat.btn-bordered.curvy(@click="viewspare(spare._id)") View
                            i.material-icons.left visibility
                        a.btn.btn-flat.btn-bordered.curvy.modal-trigger(v-bind:href="'#record'+spare._id") View
                            i.material-icons.left visibility
                        
                        a.btn.btn-flat.red.white-text.btn-bordered.curvy.modal-trigger(@click='spareDelete(spare._id)')
                            i.material-icons delete



block scripts
    script(src="/js/init/spares.js")
